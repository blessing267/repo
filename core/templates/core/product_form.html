{% extends 'core/base.html' %}
{% load crispy_forms_tags %}
{% load i18n %}

{% block content %}
<div class="container my-4">
    <div class="card shadow-sm">
        <div class="card-header bg-success text-white">
            <h4 class="mb-0 fw-bold">{% trans "Post Your Crop for Sale" %}</h4>
        </div>
        <div class="card-body">

            <!-- OFFLINE BANNER -->
            <div id="offline-banner" style="display:none; background:yellow; padding:10px; text-align:center; margin-bottom:15px;">
                You are offline. Changes will sync when internet returns. 
            </div>

            <form id="productForm" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form|crispy }}
                <button type="submit" class="btn btn-success w-100">
                    âž• {% trans "Post Crop" %}
                </button>
            </form>
        </div>
    </div>
</div>

<script>
    const offlineBanner = document.getElementById('offline-banner');
    
    // Show/hide banner
    function updateOnlineStatus() {
        if (!navigator.onLine) {
            offlineBanner.style.display = 'block';
        } else {
            offlineBanner.style.display = 'none';
        }
    }
    
    window.addEventListener('online', updateOnlineStatus);
    window.addEventListener('offline', updateOnlineStatus);
    // Run on page load
    updateOnlineStatus();

</script>
{% endblock %}
